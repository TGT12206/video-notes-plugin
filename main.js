/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => VideoNote
});
module.exports = __toCommonJS(main_exports);

// video-note-view.ts
var import_obsidian = require("obsidian");
var VIEW_TYPE_VIDEO_NOTE = "video-note";
var VIDEO_NOTE_EXTENSION = "vnote";
var VideoNoteView = class extends import_obsidian.TextFileView {
  constructor(leaf) {
    super(leaf);
  }
  getViewType() {
    return VIEW_TYPE_VIDEO_NOTE;
  }
  async onLoadFile(file) {
    this.currentFileName = file.basename;
    super.onLoadFile(file);
  }
  async onRename(file) {
    this.currentFileName = file.basename;
  }
  getDisplayText() {
    return this.currentFileName;
  }
  async setViewData(data, clear) {
    await this.Display(data);
  }
  getViewData() {
    return JSON.stringify(this.dataToSave);
  }
  clear() {
    return;
  }
  async Display(data) {
    this.contentEl.empty();
    this.dataToSave = JSON.parse(data);
    this.dataToSave.notes.sort((a, b) => {
      return a.time - b.time;
    });
    const path = this.dataToSave.videoPath;
    const mainDiv = this.contentEl.createDiv("video-note-main-div vbox");
    const pathInput = mainDiv.createEl("input", { type: "text", value: path });
    const videoEl = mainDiv.createEl("video");
    this.DisplayCustomVideoControls(videoEl, mainDiv.createDiv());
    const tFile = this.app.vault.getFileByPath(path);
    if (tFile === null) {
      new import_obsidian.Notice("Video was not found!");
      console.log("Video at path " + path + " was not found!");
    } else {
      const arrayBuffer = await this.app.vault.readBinary(tFile);
      const blob = new Blob([arrayBuffer]);
      const mediaUrl = URL.createObjectURL(blob);
      videoEl.src = mediaUrl;
    }
    videoEl.className = "video-note-video";
    this.registerDomEvent(pathInput, "change", () => {
      this.dataToSave.videoPath = pathInput.value;
      videoEl.src = pathInput.value;
      videoEl.currentTime = 0;
      currTime = 0;
      currentIndex = 0;
    });
    let currTime = 0;
    let currentIndex = 0;
    const notesListDiv = mainDiv.createDiv("video-notes-list-wrapper vbox");
    const refreshTextAreaHeight = (textarea) => {
      textarea.style.height = "auto";
      textarea.style.height = textarea.scrollHeight + "px";
    };
    let noteDivs = [];
    const displayNotes = () => {
      notesListDiv.empty();
      noteDivs = [];
      const notesDiv = notesListDiv.createDiv("video-notes-list vbox");
      for (let i = 0; i < this.dataToSave.notes.length; i++) {
        const index = i;
        const noteDiv = notesDiv.createDiv("hbox video-note");
        if (index === currentIndex) {
          noteDiv.classList.add("video-note-highlighted");
        }
        const currNote = this.dataToSave.notes[i];
        const deleteButton = noteDiv.createEl("button");
        const noteInput = noteDiv.createEl("textarea", { text: currNote.note });
        const setTime = noteDiv.createEl("button");
        const goToTime = noteDiv.createEl("button");
        (0, import_obsidian.setIcon)(deleteButton, "trash-2");
        (0, import_obsidian.setIcon)(setTime, "flag-triangle-right");
        (0, import_obsidian.setIcon)(goToTime, "play");
        deleteButton.className = "remove-button";
        noteInput.className = "video-note-input";
        this.registerDomEvent(deleteButton, "click", () => {
          this.dataToSave.notes.splice(index, 1);
          displayNotes();
          if (currentIndex === index && index > 0) {
            currentIndex--;
          }
        });
        this.registerDomEvent(setTime, "click", () => {
          this.dataToSave.notes[i].time = currTime;
        });
        this.registerDomEvent(goToTime, "click", () => {
          videoEl.currentTime = currNote.time;
          currTime = currNote.time;
        });
        this.registerDomEvent(noteInput, "input", () => {
          refreshTextAreaHeight(noteInput);
        });
        this.registerDomEvent(noteInput, "change", () => {
          this.dataToSave.notes[i].note = noteInput.value;
        });
        refreshTextAreaHeight(noteInput);
        noteDivs.push(noteDiv);
      }
      const addButton = notesListDiv.createEl("button", { text: "+" });
      addButton.className = "add-button";
      this.registerDomEvent(addButton, "click", () => {
        this.dataToSave.notes.push({ time: currTime, note: "" });
        this.dataToSave.notes.sort((a, b) => {
          return a.time - b.time;
        });
        displayNotes();
        findCurrntNoteAndHighlight(true);
      });
    };
    const findCurrntNoteAndHighlight = (forciblyScroll) => {
      currTime = videoEl.currentTime;
      const oldIndex = currentIndex;
      let found = false;
      for (let i = this.dataToSave.notes.length - 1; !found && i >= 0; i--) {
        if (currTime >= this.dataToSave.notes[i].time) {
          currentIndex = i;
          found = true;
        }
      }
      if (!found) {
        currentIndex = 0;
      }
      if (oldIndex != currentIndex) {
        noteDivs[oldIndex].removeClass("video-note-highlighted");
        noteDivs[currentIndex].addClass("video-note-highlighted");
        noteDivs[currentIndex].scrollIntoView();
      }
    };
    this.registerDomEvent(videoEl, "timeupdate", () => {
      findCurrntNoteAndHighlight(false);
    });
    displayNotes();
  }
  DisplayCustomVideoControls(vid, controlsDiv) {
    controlsDiv.className = "video-note-controls vbox";
    const topControls = controlsDiv.createDiv("video-note-top-controls hbox");
    const leftControls = topControls.createDiv("video-note-left-controls hbox");
    const rightControls = topControls.createDiv("video-note-right-controls hbox");
    const timeSlider = controlsDiv.createEl("input", { type: "range" });
    timeSlider.min = "0";
    timeSlider.max = vid.duration + "";
    timeSlider.className = "video-time-slider";
    timeSlider.step = "0.01";
    vid.controls = true;
    vid.autoplay = true;
    vid.loop = true;
    let skipAmt = 1;
    const back = leftControls.createEl("button");
    const play = leftControls.createEl("button");
    const forward = leftControls.createEl("button");
    (0, import_obsidian.setIcon)(back, "arrow-big-left-dash");
    (0, import_obsidian.setIcon)(play, "pause");
    (0, import_obsidian.setIcon)(forward, "arrow-big-right-dash");
    this.registerDomEvent(back, "click", () => {
      const newTime = vid.currentTime - skipAmt;
      if (newTime >= 0) {
        vid.currentTime = newTime;
      }
    });
    this.registerDomEvent(forward, "click", () => {
      const newTime = vid.currentTime + skipAmt;
      if (newTime <= vid.duration) {
        vid.currentTime = newTime;
      }
    });
    this.registerDomEvent(play, "click", () => {
      const nowPlaying = vid.paused;
      nowPlaying ? vid.play() : vid.pause();
      play.empty();
      (0, import_obsidian.setIcon)(play, nowPlaying ? "pause" : "play");
    });
    const timeText = leftControls.createEl("div", { text: "0 / " + vid.duration });
    const skipAmtIcon = rightControls.createDiv();
    const skipAmtInput = rightControls.createEl("input", { type: "text", value: "1" });
    const playbackSpeedIcon = rightControls.createDiv();
    const playbackSpeedInput = rightControls.createEl("input", { type: "text", value: "1" });
    const loopButton = rightControls.createEl("button");
    (0, import_obsidian.setIcon)(skipAmtIcon, "arrow-left-right");
    (0, import_obsidian.setIcon)(playbackSpeedIcon, "gauge");
    (0, import_obsidian.setIcon)(loopButton, "refresh-cw-off");
    this.registerDomEvent(skipAmtInput, "change", () => {
      skipAmt = parseFloat(skipAmtInput.value);
    });
    this.registerDomEvent(playbackSpeedInput, "change", () => {
      vid.playbackRate = parseFloat(playbackSpeedInput.value);
    });
    this.registerDomEvent(loopButton, "click", () => {
      vid.loop = !vid.loop;
      loopButton.empty();
      (0, import_obsidian.setIcon)(loopButton, vid.loop ? "refresh-cw-off" : "repeat");
    });
    this.registerDomEvent(timeSlider, "input", () => {
      vid.currentTime = parseFloat(timeSlider.value);
    });
    this.registerDomEvent(vid, "timeupdate", () => {
      const currTime = vid.currentTime;
      const currDur = vid.duration;
      timeSlider.value = currTime + "";
      timeSlider.max = currDur + "";
      let roundedTime = Math.floor(currTime);
      let roundedDur = Math.floor(currDur);
      const timeDecimals = currTime - roundedTime;
      const durDecimals = currDur - roundedDur;
      const timeHrs = Math.floor(roundedTime / 3600);
      const durHrs = Math.floor(roundedDur / 3600);
      roundedTime -= timeHrs * 3600;
      roundedDur -= durHrs * 3600;
      const timeMins = Math.floor(roundedTime / 60);
      const durMins = Math.floor(roundedDur / 60);
      roundedTime -= timeHrs * 3600 + timeMins * 60;
      roundedDur -= durHrs * 3600 + durMins * 60;
      const timeSecs = roundedTime + timeDecimals;
      const durSecs = roundedDur + durDecimals;
      const formattedTime = (durHrs > 0 ? (timeHrs < 10 ? "0" : "") + timeHrs + ":" : "") + (durMins > 0 ? (timeMins < 10 ? "0" : "") + timeMins + ":" : "") + (timeSecs < 10 ? "0" : "") + timeSecs.toFixed(2) + " / " + (durHrs > 0 ? (durHrs < 10 ? "0" : "") + durHrs + ":" : "") + (durMins > 0 ? (durMins < 10 ? "0" : "") + durMins + ":" : "") + (durSecs < 10 ? "0" : "") + durSecs.toFixed(2);
      timeText.textContent = formattedTime;
    });
  }
};
var VideoNoteDTO = class {
  constructor() {
    this.videoPath = "";
    this.notes = [];
  }
};

// main.ts
var import_obsidian2 = require("obsidian");
var VideoNote = class extends import_obsidian2.Plugin {
  async onload() {
    this.registerView(
      VIEW_TYPE_VIDEO_NOTE,
      (leaf) => new VideoNoteView(leaf)
    );
    this.registerExtensions([VIDEO_NOTE_EXTENSION], VIEW_TYPE_VIDEO_NOTE);
    this.addCommand({
      id: "new-video-note",
      name: "Create New Video Note",
      callback: async () => {
        const newFile = await this.app.vault.create("Untitled." + VIDEO_NOTE_EXTENSION, JSON.stringify(new VideoNoteDTO()));
        this.app.workspace.getLeaf("tab").openFile(newFile);
      }
    });
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        menu.addItem((item) => {
          item.setTitle("New Video Note").setIcon("play").onClick(async () => {
            const newFile = await this.app.vault.create((file.parent === null ? "" : file.parent.path + "/") + "Untitled." + VIDEO_NOTE_EXTENSION, JSON.stringify(new VideoNoteDTO()));
            this.app.workspace.getLeaf("tab").openFile(newFile);
          });
        });
      })
    );
  }
  onunload() {
  }
  async activateView(view_type) {
    const { workspace } = this.app;
    let leaf = null;
    leaf = workspace.getLeaf("tab");
    if (leaf === null) {
      new import_obsidian2.Notice("Failed to create view: workspace leaf was null");
      return;
    }
    await leaf.setViewState({ type: view_type, active: true });
    workspace.revealLeaf(leaf);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJ2aWRlby1ub3RlLXZpZXcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFZpZGVvTm90ZVZpZXcsIFZJRVdfVFlQRV9WSURFT19OT1RFLCBWSURFT19OT1RFX0VYVEVOU0lPTiwgVmlkZW9Ob3RlRFRPIH0gZnJvbSAndmlkZW8tbm90ZS12aWV3JztcclxuaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWRlb05vdGUgZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcclxuXHRcdFx0VklFV19UWVBFX1ZJREVPX05PVEUsXHJcblx0XHRcdChsZWFmKSA9PiBuZXcgVmlkZW9Ob3RlVmlldyhsZWFmKVxyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXh0ZW5zaW9ucyhbVklERU9fTk9URV9FWFRFTlNJT05dLCBWSUVXX1RZUEVfVklERU9fTk9URSk7XHJcblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICduZXctdmlkZW8tbm90ZScsXHJcblx0XHRcdG5hbWU6ICdDcmVhdGUgTmV3IFZpZGVvIE5vdGUnLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IG5ld0ZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoJ1VudGl0bGVkLicgKyBWSURFT19OT1RFX0VYVEVOU0lPTiwgSlNPTi5zdHJpbmdpZnkobmV3IFZpZGVvTm90ZURUTygpKSk7XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKG5ld0ZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1tZW51JywgKG1lbnUsIGZpbGUpID0+IHtcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ05ldyBWaWRlbyBOb3RlJylcclxuXHRcdFx0XHRcdFx0LnNldEljb24oJ3BsYXknKVxyXG5cdFx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSgoZmlsZS5wYXJlbnQgPT09IG51bGwgPyAnJyA6IGZpbGUucGFyZW50LnBhdGggKyAnLycpICsgJ1VudGl0bGVkLicgKyBWSURFT19OT1RFX0VYVEVOU0lPTiwgSlNPTi5zdHJpbmdpZnkobmV3IFZpZGVvTm90ZURUTygpKSk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKG5ld0ZpbGUpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblxyXG5cdH1cclxuXHJcblx0YXN5bmMgYWN0aXZhdGVWaWV3KHZpZXdfdHlwZTogc3RyaW5nKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblxyXG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHJcblx0XHRsZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG5cdFx0aWYgKGxlYWYgPT09IG51bGwpIHtcclxuXHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBjcmVhdGUgdmlldzogd29ya3NwYWNlIGxlYWYgd2FzIG51bGxcIik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogdmlld190eXBlLCBhY3RpdmU6IHRydWUgfSk7XHJcblxyXG5cdFx0Ly8gXCJSZXZlYWxcIiB0aGUgbGVhZiBpbiBjYXNlIGl0IGlzIGluIGEgY29sbGFwc2VkIHNpZGViYXJcclxuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG5cdH1cclxufSIsICJpbXBvcnQgeyBOb3RpY2UsIHNldEljb24sIFRleHRGaWxlVmlldywgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZJREVPX05PVEUgPSAndmlkZW8tbm90ZSc7XHJcbmV4cG9ydCBjb25zdCBWSURFT19OT1RFX0VYVEVOU0lPTiA9ICd2bm90ZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgVmlkZW9Ob3RlVmlldyBleHRlbmRzIFRleHRGaWxlVmlldyB7XHJcblx0ZGF0YVRvU2F2ZTogVmlkZW9Ob3RlRFRPO1xyXG5cdGN1cnJlbnRGaWxlTmFtZTogc3RyaW5nO1xyXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcclxuXHRcdHN1cGVyKGxlYWYpO1xyXG5cdH1cclxuXHJcblx0Z2V0Vmlld1R5cGUoKSB7XHJcblx0XHRyZXR1cm4gVklFV19UWVBFX1ZJREVPX05PVEU7XHJcblx0fVxyXG5cclxuXHRvdmVycmlkZSBhc3luYyBvbkxvYWRGaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0aGlzLmN1cnJlbnRGaWxlTmFtZSA9IGZpbGUuYmFzZW5hbWU7XHJcblx0XHRzdXBlci5vbkxvYWRGaWxlKGZpbGUpO1xyXG5cdH1cclxuXHJcblx0b3ZlcnJpZGUgYXN5bmMgb25SZW5hbWUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRoaXMuY3VycmVudEZpbGVOYW1lID0gZmlsZS5iYXNlbmFtZTtcclxuXHR9XHJcblxyXG5cdGdldERpc3BsYXlUZXh0KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudEZpbGVOYW1lO1xyXG5cdH1cclxuXHJcblx0b3ZlcnJpZGUgYXN5bmMgc2V0Vmlld0RhdGEoZGF0YTogc3RyaW5nLCBjbGVhcjogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5EaXNwbGF5KGRhdGEpO1xyXG5cdH1cclxuXHJcblx0Z2V0Vmlld0RhdGEoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGFUb1NhdmUpO1xyXG5cdH1cclxuXHJcblx0Y2xlYXIoKTogdm9pZCB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIERpc3BsYXkoZGF0YTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0XHJcblx0XHR0aGlzLmRhdGFUb1NhdmUgPSA8VmlkZW9Ob3RlRFRPPiBKU09OLnBhcnNlKGRhdGEpO1xyXG5cdFx0dGhpcy5kYXRhVG9TYXZlLm5vdGVzLnNvcnQoKGEsIGIpID0+IHsgcmV0dXJuIGEudGltZSAtIGIudGltZSB9KTtcclxuXHRcdGNvbnN0IHBhdGggPSB0aGlzLmRhdGFUb1NhdmUudmlkZW9QYXRoO1xyXG5cclxuXHRcdGNvbnN0IG1haW5EaXYgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoJ3ZpZGVvLW5vdGUtbWFpbi1kaXYgdmJveCcpO1xyXG5cdFx0Y29uc3QgcGF0aElucHV0ID0gbWFpbkRpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6IHBhdGggfSApO1xyXG5cdFx0Y29uc3QgdmlkZW9FbCA9IG1haW5EaXYuY3JlYXRlRWwoJ3ZpZGVvJyk7XHJcblx0XHR0aGlzLkRpc3BsYXlDdXN0b21WaWRlb0NvbnRyb2xzKHZpZGVvRWwsIG1haW5EaXYuY3JlYXRlRGl2KCkpO1xyXG5cdFx0XHJcblx0XHRjb25zdCB0RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVCeVBhdGgocGF0aCk7XHJcblx0XHRpZiAodEZpbGUgPT09IG51bGwpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnVmlkZW8gd2FzIG5vdCBmb3VuZCEnKTtcclxuXHRcdFx0Y29uc29sZS5sb2coJ1ZpZGVvIGF0IHBhdGggJyArIHBhdGggKyAnIHdhcyBub3QgZm91bmQhJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWRCaW5hcnkodEZpbGUpO1xyXG5cdFx0XHRjb25zdCBibG9iID0gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSk7XHJcblx0XHRcdGNvbnN0IG1lZGlhVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuXHRcdFx0dmlkZW9FbC5zcmMgPSBtZWRpYVVybDtcclxuXHRcdH1cclxuXHRcdHZpZGVvRWwuY2xhc3NOYW1lID0gJ3ZpZGVvLW5vdGUtdmlkZW8nO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChwYXRoSW5wdXQsICdjaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuZGF0YVRvU2F2ZS52aWRlb1BhdGggPSBwYXRoSW5wdXQudmFsdWU7XHJcblx0XHRcdHZpZGVvRWwuc3JjID0gcGF0aElucHV0LnZhbHVlO1xyXG5cdFx0XHR2aWRlb0VsLmN1cnJlbnRUaW1lID0gMDtcclxuXHRcdFx0Y3VyclRpbWUgPSAwO1xyXG5cdFx0XHRjdXJyZW50SW5kZXggPSAwO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bGV0IGN1cnJUaW1lID0gMDtcclxuXHRcdGxldCBjdXJyZW50SW5kZXggPSAwO1xyXG5cclxuXHRcdGNvbnN0IG5vdGVzTGlzdERpdiA9IG1haW5EaXYuY3JlYXRlRGl2KCd2aWRlby1ub3Rlcy1saXN0LXdyYXBwZXIgdmJveCcpO1xyXG5cclxuXHRcdGNvbnN0IHJlZnJlc2hUZXh0QXJlYUhlaWdodCA9ICh0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCkgPT4ge1xyXG5cdFx0XHR0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSAnYXV0byc7IC8vIFJlc2V0IGhlaWdodCB0byByZWNhbGN1bGF0ZVxyXG4gICAgICAgIFx0dGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gKHRleHRhcmVhLnNjcm9sbEhlaWdodCkgKyAncHgnO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBub3RlRGl2czogSFRNTERpdkVsZW1lbnRbXSA9IFtdO1xyXG5cdFx0Y29uc3QgZGlzcGxheU5vdGVzID0gKCkgPT4ge1xyXG5cdFx0XHRub3Rlc0xpc3REaXYuZW1wdHkoKTtcclxuXHRcdFx0bm90ZURpdnMgPSBbXTtcclxuXHRcdFx0Y29uc3Qgbm90ZXNEaXYgPSBub3Rlc0xpc3REaXYuY3JlYXRlRGl2KCd2aWRlby1ub3Rlcy1saXN0IHZib3gnKTtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFUb1NhdmUubm90ZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRjb25zdCBpbmRleCA9IGk7XHJcblx0XHRcdFx0Y29uc3Qgbm90ZURpdiA9IG5vdGVzRGl2LmNyZWF0ZURpdignaGJveCB2aWRlby1ub3RlJyk7XHJcblx0XHRcdFx0aWYgKGluZGV4ID09PSBjdXJyZW50SW5kZXgpIHtcclxuXHRcdFx0XHRcdG5vdGVEaXYuY2xhc3NMaXN0LmFkZCgndmlkZW8tbm90ZS1oaWdobGlnaHRlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgY3Vyck5vdGUgPSB0aGlzLmRhdGFUb1NhdmUubm90ZXNbaV07XHJcblxyXG5cdFx0XHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IG5vdGVEaXYuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0XHRcdGNvbnN0IG5vdGVJbnB1dCA9IG5vdGVEaXYuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyB0ZXh0OiBjdXJyTm90ZS5ub3RlIH0gKTtcclxuXHRcdFx0XHRjb25zdCBzZXRUaW1lID0gbm90ZURpdi5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRcdFx0Y29uc3QgZ29Ub1RpbWUgPSBub3RlRGl2LmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHJcblx0XHRcdFx0c2V0SWNvbihkZWxldGVCdXR0b24sICd0cmFzaC0yJyk7XHJcblx0XHRcdFx0c2V0SWNvbihzZXRUaW1lLCAnZmxhZy10cmlhbmdsZS1yaWdodCcpO1xyXG5cdFx0XHRcdHNldEljb24oZ29Ub1RpbWUsICdwbGF5Jyk7XHJcblxyXG5cdFx0XHRcdGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAncmVtb3ZlLWJ1dHRvbic7XHJcblx0XHRcdFx0bm90ZUlucHV0LmNsYXNzTmFtZSA9ICd2aWRlby1ub3RlLWlucHV0JztcclxuXHJcblx0XHRcdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRlbGV0ZUJ1dHRvbiwgJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5kYXRhVG9TYXZlLm5vdGVzLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdFx0XHRkaXNwbGF5Tm90ZXMoKTtcclxuXHRcdFx0XHRcdGlmIChjdXJyZW50SW5kZXggPT09IGluZGV4ICYmIGluZGV4ID4gMCkge1xyXG5cdFx0XHRcdFx0XHRjdXJyZW50SW5kZXgtLTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoc2V0VGltZSwgJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5kYXRhVG9TYXZlLm5vdGVzW2ldLnRpbWUgPSBjdXJyVGltZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZ29Ub1RpbWUsICdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHRcdHZpZGVvRWwuY3VycmVudFRpbWUgPSBjdXJyTm90ZS50aW1lO1xyXG5cdFx0XHRcdFx0Y3VyclRpbWUgPSBjdXJyTm90ZS50aW1lO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChub3RlSW5wdXQsICdpbnB1dCcsICgpID0+IHtcclxuXHRcdFx0XHRcdHJlZnJlc2hUZXh0QXJlYUhlaWdodChub3RlSW5wdXQpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChub3RlSW5wdXQsICdjaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmRhdGFUb1NhdmUubm90ZXNbaV0ubm90ZSA9IG5vdGVJbnB1dC52YWx1ZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZWZyZXNoVGV4dEFyZWFIZWlnaHQobm90ZUlucHV0KTtcclxuXHJcblx0XHRcdFx0bm90ZURpdnMucHVzaChub3RlRGl2KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zdCBhZGRCdXR0b24gPSBub3Rlc0xpc3REaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysnIH0gKTtcclxuXHRcdFx0YWRkQnV0dG9uLmNsYXNzTmFtZSA9ICdhZGQtYnV0dG9uJ1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoYWRkQnV0dG9uLCAnY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5kYXRhVG9TYXZlLm5vdGVzLnB1c2goeyB0aW1lOiBjdXJyVGltZSwgbm90ZTogJycgfSk7XHJcblx0XHRcdFx0dGhpcy5kYXRhVG9TYXZlLm5vdGVzLnNvcnQoKGEsIGIpID0+IHsgcmV0dXJuIGEudGltZSAtIGIudGltZSB9KTtcclxuXHRcdFx0XHRkaXNwbGF5Tm90ZXMoKTtcclxuXHRcdFx0XHRmaW5kQ3Vycm50Tm90ZUFuZEhpZ2hsaWdodCh0cnVlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZmluZEN1cnJudE5vdGVBbmRIaWdobGlnaHQgPSAoZm9yY2libHlTY3JvbGw6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0Y3VyclRpbWUgPSB2aWRlb0VsLmN1cnJlbnRUaW1lO1xyXG5cdFx0XHRjb25zdCBvbGRJbmRleCA9IGN1cnJlbnRJbmRleDtcclxuXHRcdFx0bGV0IGZvdW5kID0gZmFsc2U7XHJcblx0XHRcdGZvciAobGV0IGkgPSB0aGlzLmRhdGFUb1NhdmUubm90ZXMubGVuZ3RoIC0gMTsgIWZvdW5kICYmIGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0aWYgKGN1cnJUaW1lID49IHRoaXMuZGF0YVRvU2F2ZS5ub3Rlc1tpXS50aW1lKSB7XHJcblx0XHRcdFx0XHRjdXJyZW50SW5kZXggPSBpO1xyXG5cdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIWZvdW5kKSB7XHJcblx0XHRcdFx0Y3VycmVudEluZGV4ID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAob2xkSW5kZXggIT0gY3VycmVudEluZGV4KSB7XHJcblx0XHRcdFx0bm90ZURpdnNbb2xkSW5kZXhdLnJlbW92ZUNsYXNzKCd2aWRlby1ub3RlLWhpZ2hsaWdodGVkJyk7XHJcblx0XHRcdFx0bm90ZURpdnNbY3VycmVudEluZGV4XS5hZGRDbGFzcygndmlkZW8tbm90ZS1oaWdobGlnaHRlZCcpO1xyXG5cdFx0XHRcdG5vdGVEaXZzW2N1cnJlbnRJbmRleF0uc2Nyb2xsSW50b1ZpZXcoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudCh2aWRlb0VsLCAndGltZXVwZGF0ZScsICgpID0+IHtcclxuXHRcdFx0ZmluZEN1cnJudE5vdGVBbmRIaWdobGlnaHQoZmFsc2UpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGlzcGxheU5vdGVzKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIERpc3BsYXlDdXN0b21WaWRlb0NvbnRyb2xzKHZpZDogSFRNTFZpZGVvRWxlbWVudCwgY29udHJvbHNEaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRjb250cm9sc0Rpdi5jbGFzc05hbWUgPSAndmlkZW8tbm90ZS1jb250cm9scyB2Ym94JztcclxuXHRcdGNvbnN0IHRvcENvbnRyb2xzID0gY29udHJvbHNEaXYuY3JlYXRlRGl2KCd2aWRlby1ub3RlLXRvcC1jb250cm9scyBoYm94Jyk7XHJcblx0XHRjb25zdCBsZWZ0Q29udHJvbHMgPSB0b3BDb250cm9scy5jcmVhdGVEaXYoJ3ZpZGVvLW5vdGUtbGVmdC1jb250cm9scyBoYm94Jyk7XHJcblx0XHRjb25zdCByaWdodENvbnRyb2xzID0gdG9wQ29udHJvbHMuY3JlYXRlRGl2KCd2aWRlby1ub3RlLXJpZ2h0LWNvbnRyb2xzIGhib3gnKTtcclxuXHRcdGNvbnN0IHRpbWVTbGlkZXIgPSBjb250cm9sc0Rpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdyYW5nZScgfSApO1xyXG5cdFx0dGltZVNsaWRlci5taW4gPSAnMCc7XHJcblx0XHR0aW1lU2xpZGVyLm1heCA9IHZpZC5kdXJhdGlvbiArICcnO1xyXG5cdFx0dGltZVNsaWRlci5jbGFzc05hbWUgPSAndmlkZW8tdGltZS1zbGlkZXInO1xyXG5cdFx0dGltZVNsaWRlci5zdGVwID0gJzAuMDEnO1xyXG5cdFx0dmlkLmNvbnRyb2xzID0gdHJ1ZTtcclxuXHRcdHZpZC5hdXRvcGxheSA9IHRydWU7XHJcblx0XHR2aWQubG9vcCA9IHRydWU7XHJcblxyXG5cdFx0bGV0IHNraXBBbXQgPSAxO1xyXG5cclxuXHRcdGNvbnN0IGJhY2sgPSBsZWZ0Q29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y29uc3QgcGxheSA9IGxlZnRDb250cm9scy5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRjb25zdCBmb3J3YXJkID0gbGVmdENvbnRyb2xzLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHJcblx0XHRzZXRJY29uKGJhY2ssICdhcnJvdy1iaWctbGVmdC1kYXNoJyk7XHJcblx0XHRzZXRJY29uKHBsYXksICdwYXVzZScpO1xyXG5cdFx0c2V0SWNvbihmb3J3YXJkLCAnYXJyb3ctYmlnLXJpZ2h0LWRhc2gnKTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoYmFjaywgJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBuZXdUaW1lID0gdmlkLmN1cnJlbnRUaW1lIC0gc2tpcEFtdDtcclxuXHRcdFx0aWYgKG5ld1RpbWUgPj0gMCkge1xyXG5cdFx0XHRcdHZpZC5jdXJyZW50VGltZSA9IG5ld1RpbWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGZvcndhcmQsICdjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgbmV3VGltZSA9IHZpZC5jdXJyZW50VGltZSArIHNraXBBbXQ7XHJcblx0XHRcdGlmIChuZXdUaW1lIDw9IHZpZC5kdXJhdGlvbikge1xyXG5cdFx0XHRcdHZpZC5jdXJyZW50VGltZSA9IG5ld1RpbWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KHBsYXksICdjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y29uc3Qgbm93UGxheWluZyA9IHZpZC5wYXVzZWQ7IC8vIGFmdGVyIHRoZSBuZXh0IGxpbmUsIHRoaXMgYm9vbGVhbiB3aWxsIGFjdHVhbGx5IG1lYW4gd2hhdCBpdCBzYXlzXHJcblx0XHRcdG5vd1BsYXlpbmcgPyB2aWQucGxheSgpIDogdmlkLnBhdXNlKCk7XHJcblx0XHRcdHBsYXkuZW1wdHkoKTtcclxuXHRcdFx0c2V0SWNvbihwbGF5LCBub3dQbGF5aW5nID8gJ3BhdXNlJyA6ICdwbGF5Jyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCB0aW1lVGV4dCA9IGxlZnRDb250cm9scy5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnMCAvICcgKyB2aWQuZHVyYXRpb24gfSApO1xyXG5cclxuXHRcdGNvbnN0IHNraXBBbXRJY29uID0gcmlnaHRDb250cm9scy5jcmVhdGVEaXYoKTtcclxuXHRcdGNvbnN0IHNraXBBbXRJbnB1dCA9IHJpZ2h0Q29udHJvbHMuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnMScgfSApO1xyXG5cdFx0Y29uc3QgcGxheWJhY2tTcGVlZEljb24gPSByaWdodENvbnRyb2xzLmNyZWF0ZURpdigpO1xyXG5cdFx0Y29uc3QgcGxheWJhY2tTcGVlZElucHV0ID0gcmlnaHRDb250cm9scy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcxJyB9ICk7XHJcblx0XHRjb25zdCBsb29wQnV0dG9uID0gcmlnaHRDb250cm9scy5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRcclxuXHRcdHNldEljb24oc2tpcEFtdEljb24sICdhcnJvdy1sZWZ0LXJpZ2h0Jyk7XHJcblx0XHRzZXRJY29uKHBsYXliYWNrU3BlZWRJY29uLCAnZ2F1Z2UnKTtcclxuXHRcdHNldEljb24obG9vcEJ1dHRvbiwgJ3JlZnJlc2gtY3ctb2ZmJyk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KHNraXBBbXRJbnB1dCwgJ2NoYW5nZScsICgpID0+IHtcclxuXHRcdFx0c2tpcEFtdCA9IHBhcnNlRmxvYXQoc2tpcEFtdElucHV0LnZhbHVlKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KHBsYXliYWNrU3BlZWRJbnB1dCwgJ2NoYW5nZScsICgpID0+IHtcclxuXHRcdFx0dmlkLnBsYXliYWNrUmF0ZSA9IHBhcnNlRmxvYXQocGxheWJhY2tTcGVlZElucHV0LnZhbHVlKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGxvb3BCdXR0b24sICdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dmlkLmxvb3AgPSAhdmlkLmxvb3A7XHJcblx0XHRcdGxvb3BCdXR0b24uZW1wdHkoKTtcclxuXHRcdFx0c2V0SWNvbihsb29wQnV0dG9uLCB2aWQubG9vcCA/ICdyZWZyZXNoLWN3LW9mZicgOiAncmVwZWF0Jyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQodGltZVNsaWRlciwgJ2lucHV0JywgKCkgPT4ge1xyXG5cdFx0XHR2aWQuY3VycmVudFRpbWUgPSBwYXJzZUZsb2F0KHRpbWVTbGlkZXIudmFsdWUpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQodmlkLCAndGltZXVwZGF0ZScsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgY3VyclRpbWUgPSB2aWQuY3VycmVudFRpbWU7XHJcblx0XHRcdGNvbnN0IGN1cnJEdXIgPSB2aWQuZHVyYXRpb247XHJcblxyXG5cdFx0XHR0aW1lU2xpZGVyLnZhbHVlID0gY3VyclRpbWUgKyAnJztcclxuXHRcdFx0dGltZVNsaWRlci5tYXggPSBjdXJyRHVyICsgJyc7XHJcblxyXG5cdFx0XHRsZXQgcm91bmRlZFRpbWUgPSBNYXRoLmZsb29yKGN1cnJUaW1lKTtcclxuXHRcdFx0bGV0IHJvdW5kZWREdXIgPSBNYXRoLmZsb29yKGN1cnJEdXIpO1xyXG5cclxuXHRcdFx0Y29uc3QgdGltZURlY2ltYWxzID0gY3VyclRpbWUgLSByb3VuZGVkVGltZTtcclxuXHRcdFx0Y29uc3QgZHVyRGVjaW1hbHMgPSBjdXJyRHVyIC0gcm91bmRlZER1cjtcclxuXHJcblx0XHRcdGNvbnN0IHRpbWVIcnMgPSBNYXRoLmZsb29yKHJvdW5kZWRUaW1lIC8gMzYwMCk7XHJcblx0XHRcdGNvbnN0IGR1ckhycyA9IE1hdGguZmxvb3Iocm91bmRlZER1ciAvIDM2MDApO1xyXG5cclxuXHRcdFx0cm91bmRlZFRpbWUgLT0gdGltZUhycyAqIDM2MDA7XHJcblx0XHRcdHJvdW5kZWREdXIgLT0gZHVySHJzICogMzYwMDtcclxuXHJcblx0XHRcdGNvbnN0IHRpbWVNaW5zID0gTWF0aC5mbG9vcihyb3VuZGVkVGltZSAvIDYwKTtcclxuXHRcdFx0Y29uc3QgZHVyTWlucyA9IE1hdGguZmxvb3Iocm91bmRlZER1ciAvIDYwKTtcclxuXHRcdFx0XHJcblx0XHRcdHJvdW5kZWRUaW1lIC09IHRpbWVIcnMgKiAzNjAwICsgdGltZU1pbnMgKiA2MDtcclxuXHRcdFx0cm91bmRlZER1ciAtPSBkdXJIcnMgKiAzNjAwICsgZHVyTWlucyAqIDYwO1xyXG5cclxuXHRcdFx0Y29uc3QgdGltZVNlY3MgPSByb3VuZGVkVGltZSArIHRpbWVEZWNpbWFscztcclxuXHRcdFx0Y29uc3QgZHVyU2VjcyA9IHJvdW5kZWREdXIgKyBkdXJEZWNpbWFscztcclxuXHRcdFx0XHJcblx0XHRcdC8vIGRpc3BsYXkgaW4gYSAwMDowMDowMC4wMCAvIDAwOjAwOjAwLjAwIGZvcm1hdCwgZHJvcHBpbmcgdW5pdHMgaWYgdGhlIGR1cmF0aW9uIGlzIGxlc3MgdGhhbiB0aGF0IHVuaXRcclxuXHRcdFx0Y29uc3QgZm9ybWF0dGVkVGltZSA9XHJcblx0XHRcdFx0KGR1ckhycyA+IDAgPyAodGltZUhycyA8IDEwID8gJzAnOiAnJykgKyB0aW1lSHJzICsgJzonIDogJycpICtcclxuXHRcdFx0XHQoZHVyTWlucyA+IDAgPyAodGltZU1pbnMgPCAxMCA/ICcwJzogJycpICsgdGltZU1pbnMgKyAnOicgOiAnJykgK1xyXG5cdFx0XHRcdCh0aW1lU2VjcyA8IDEwID8gJzAnOiAnJykgKyB0aW1lU2Vjcy50b0ZpeGVkKDIpICtcclxuXHRcdFx0XHQnIC8gJyArXHJcblx0XHRcdFx0KGR1ckhycyA+IDAgPyAoZHVySHJzIDwgMTAgPyAnMCc6ICcnKSArIGR1ckhycyArICc6JyA6ICcnKSArXHJcblx0XHRcdFx0KGR1ck1pbnMgPiAwID8gKGR1ck1pbnMgPCAxMCA/ICcwJzogJycpICsgZHVyTWlucyArICc6JyA6ICcnKSArXHJcblx0XHRcdFx0KGR1clNlY3MgPCAxMCA/ICcwJzogJycpICsgZHVyU2Vjcy50b0ZpeGVkKDIpO1xyXG5cclxuXHRcdFx0dGltZVRleHQudGV4dENvbnRlbnQgPSBmb3JtYXR0ZWRUaW1lO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmlkZW9Ob3RlRFRPIHtcclxuXHQvKipcclxuXHQgKiB2YXVsdCBwYXRoIHRvIHRoZSB2aWRlbyBmaWxlXHJcblx0ICovXHJcblx0dmlkZW9QYXRoOiBzdHJpbmc7XHJcblx0LyoqXHJcblx0ICogdGhlIG5vdGVzIGF0IGVhY2ggdGltZSBzdGFtcFxyXG5cdCAqL1xyXG5cdG5vdGVzOiBub3RlW107XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLnZpZGVvUGF0aCA9ICcnO1xyXG5cdFx0dGhpcy5ub3RlcyA9IFtdO1xyXG5cdH1cclxufVxyXG5cclxudHlwZSBub3RlID0geyB0aW1lOiBudW1iZXIsIG5vdGU6IHN0cmluZyB9OyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ0FBLHNCQUFvRTtBQUU3RCxJQUFNLHVCQUF1QjtBQUM3QixJQUFNLHVCQUF1QjtBQUU3QixJQUFNLGdCQUFOLGNBQTRCLDZCQUFhO0FBQUEsRUFHL0MsWUFBWSxNQUFxQjtBQUNoQyxVQUFNLElBQUk7QUFBQSxFQUNYO0FBQUEsRUFFQSxjQUFjO0FBQ2IsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLE1BQWUsV0FBVyxNQUE0QjtBQUNyRCxTQUFLLGtCQUFrQixLQUFLO0FBQzVCLFVBQU0sV0FBVyxJQUFJO0FBQUEsRUFDdEI7QUFBQSxFQUVBLE1BQWUsU0FBUyxNQUE0QjtBQUNuRCxTQUFLLGtCQUFrQixLQUFLO0FBQUEsRUFDN0I7QUFBQSxFQUVBLGlCQUFpQjtBQUNoQixXQUFPLEtBQUs7QUFBQSxFQUNiO0FBQUEsRUFFQSxNQUFlLFlBQVksTUFBYyxPQUErQjtBQUN2RSxVQUFNLEtBQUssUUFBUSxJQUFJO0FBQUEsRUFDeEI7QUFBQSxFQUVBLGNBQXNCO0FBQ3JCLFdBQU8sS0FBSyxVQUFVLEtBQUssVUFBVTtBQUFBLEVBQ3RDO0FBQUEsRUFFQSxRQUFjO0FBQ2I7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFjLFFBQVEsTUFBYztBQUNuQyxTQUFLLFVB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
